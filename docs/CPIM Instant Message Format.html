<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>CPIM Instant Message Format</title>
		<meta http-equiv="Content-Style-Type" content="text/css">
		<meta name="description" content="Format Description for CPIM -- CPIM is the canonical data format for instant messages. ">
		<meta name="dc.type" content="web page">
		<meta name="dc.rights" content="Text is U.S. government work">
		<meta name="dc.subject" content="format sustainability">
		<meta name="dc.subject" content="digital formats">
		<meta name="dc.subject" content="text formats">
		<meta name="dc.subject" content="instant message formats">
		<meta name="dc.subject" content="file-format">
		<meta name="dc.date" content="2015-09-01">
		<meta name="dc.language" content="eng">
		<link href="//www.loc.gov/preservation/digital/formats/" rel="dc.relation.isPartOf" title="Format Sustainability">
		<link rel="stylesheet" type="text/css" href="../deog.css" media="screen">
	<script src="//assets.adobedtm.com/dac62e20b491e735c6b56e64c39134d8ee93f9cf/satelliteLib-6b47f831c184878d7338d4683ecf773a17973bb9.js"></script>
</head>
	<body><!--This HTML FDD was generated using an XSLT transformation from an XML master FDD instance, based on version 1.1 of the FDD schema.-->
<!-- begin page header -->


	<table cellpadding="3" cellspacing="0" border="0" width="100%" class="header-bg">
        <tr valign="top">
          <td class="header">&nbsp;</td>
          <td align="right"> 
            <div align="right" class="header"><a href="/preservation/digital/index.html  ">Digital Preservation Home</a> | <a href="/preservation/digital/formats/index.html">Digital Formats Home</a> &nbsp;&nbsp;&nbsp;</div>
          </td>
        </tr>
     </table>
	 
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="title-bg">
	<tr>
      <td class="title-bg" align="left" valign="middle">
<h1>&nbsp;<a href="/preservation/digital/formats/index.html">Sustainability of Digital Formats: Planning for Library of Congress Collections</a></h1>
</td>

<td align="right" class="form">
<form action="//www.loc.gov/search/" method="get" id="site_search" class="form">
<input id="searchtext" name="q" type="text" class="formtext" value=" Search this site" onfocus="this.value=''"/>
<input name="fa" value="subject:format sustainability" type="hidden" />

<input type="Submit" value="Go" hspace="0" class="go"/>
</form>

</td>
 </tr>
		
        <tr> 
          <td colspan="2" class="empty-space-format"><img src="/preservation/digital/formats/includes/horzgif.gif" alt="" width="100%" height="2"></td>
        </tr>
		<tr>
    <td colspan="2" class="formatNav"><a href="/preservation/digital/formats/intro/intro.shtml">Introduction</a> | <a href="/preservation/digital/formats/sustain/sustain.shtml">Sustainability Factors</a> | <a href="/preservation/digital/formats/content/content_categories.shtml">Content Categories</a> | 
	<a href="/preservation/digital/formats/fdd/descriptions.shtml">Format Descriptions </a> | <a href="/preservation/digital/formats/contact_format.shtml">Contact</a></td>
  </tr>
<!--
  <tr>
    <td height="20" colspan="3" align="right" bgcolor="#ffffff"> <a href="http://www.digitalpreservation.gov/formats/phprint_formats.php" target="Print" onClick="openPWindow(); ANewWindow.focus();" class="xsmall"><img src="http://www.digitalpreservation.gov/formats/print.gif" alt="Printer-friendly version" border="0" align="middle">Printer-friendly version</a>&nbsp;&nbsp;&nbsp;</td>
  </tr>-->
      </table>
		
<!-- end page header --><!--begin body area --><!-- startprint --><div class="fdd">
			<a href="descriptions.shtml">
				<b>Format Description Categories</b>
			</a> &gt;&gt; 
					<a href="browse_list.shtml">Browse Alphabetical List</a><div class="sectionhead">
				<a name="top"></a>
				<h2>CPIM Instant Message Format</h2>
			</div><a href="javascript:history.back()" class="xsmall">&gt;&gt; Back</a><div class="toc">
				<b>Table of Contents</b>
				<ul>
					<li class="first">
						<a href="#identification">Identification and description</a>
					</li>
					<li>
						<a href="#local">Local use</a>
					</li>
					<li>
						<a href="#sustainability">Sustainability factors</a>
					</li>
					<li>
						<a href="#factors">Quality and functionality factors</a>
					</li>
					<li>
						<a href="#sign">File type signifiers</a>
					</li>
					<li>
						<a href="#notes">Notes</a>
					</li>
					<li>
						<a href="#specs">Format specifications</a>
					</li>
					<li class="last">
						<a href="#useful">Useful references</a>
					</li>
				</ul>
			</div><div class="document">
				<b>
							Format Description Properties
							<a href="fdd_explanation.shtml">
						<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
					</a></b>
				<ul>
					<li class="first">ID: fdd000430</li>
					<li>Short name: CPIM</li>
					<li>Content categories: 
								text, other (instant message)</li>
					<li>Format Category:
								file-format</li>
					<li>Other facets: 
								unitary, text, structured, symbolic</li>
					<li>Last significant FDD update:
								2015-09-01</li>
					<li class="last">Draft status: Preliminary</li>
				</ul>
			</div><br clear="all"><a name="identification"></a><h3>Identification and description 
						<a href="fdd_explanation.shtml#identification">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><table border="1" cellspacing="0" cellpadding="2" width="90%" summary="The Identification and Description table lists the name of the format, a brief description, and relationships to other formats.">
				<tbody>
					<tr>
						<th scope="row" width="30%" valign="top">Full name</th>
						<td valign="top">CPIM Instant Message Format</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">Description</th>
						<td valign="top">
			<p>CPIM, short for Common Presence and Instant Messaging, is the common data message format that must be used by any CPIM-compliant message transfer protocol including instant messaging.  Standardized through <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="https://www.ietf.org/rfc/rfc3862.txt">RFC 3862</a>, the design of the CPIM format is intended to enable security to be applied, while itself remaining agnostic about the specific security mechanisms that may be appropriate for a given application.  This content format is intended to be used to exchange possibly-secured messages between different instant messaging protocols. Very strict adherence to the message format (including whitespace usage) may be needed to achieve interoperability.</p>
			<p>A Message/CPIM object is a two-part entity, where the first part contains the message metadata and the second part is the message content. The two parts are separated from the enclosing MIME header fields and also from each other by blank lines. The end of the message body is defined by the framing mechanism of the protocol used. Unlike <a href="fdd000431.shtml">SMS</a>, CPIM messages do not have a character limit.</p>
			<p>See <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="#notes">Notes</a> for description of the file structure and for information about the Instant Message Protocol.</p>
		</td>
					</tr>
					<tr>
						<th class="subhead" scope="col" colspan="2">Relationship to other formats</th>
					</tr>
					<tr>
						<th scope="row" width="30%">
					&nbsp;&nbsp;&nbsp;&nbsp;Affinity to</th>
						<td>
							<a href="fdd000393.shtml">IMF</a>, 
						Internet Message Format. Similar header syntax. See <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="#notes">Notes</a> for details</td>
					</tr>
				</tbody>
			</table><br><a name="local"></a><h3>Local use 
						<a href="fdd_explanation.shtml#local">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><table border="1" cellspacing="0" cellpadding="2" width="90%" summary="The Local Use table lists any actual practice, historical use, or stated preference for this format at the Library of Congress.">
				<tbody>
					<tr>
						<th scope="row" width="30%" valign="top">LC experience or existing holdings</th>
						<td valign="top">&nbsp;</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">LC preference</th>
						<td valign="top">&nbsp;</td>
					</tr>
				</tbody>
			</table><br><a name="sustainability"></a><h3>Sustainability factors
						<a href="fdd_explanation.shtml#sustainability">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><table border="1" cellspacing="0" cellpadding="2" width="90%" summary="The Sustainability Factors table provides a list of notes that analyze this format in terms of factors that influence the likely feasibility and cost of preserving information against technological obsolescence.">
				<tbody>
					<tr>
						<th scope="row" width="30%" valign="top">Disclosure</th>
						<td valign="top">Fully documented.</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">&nbsp;&nbsp;&nbsp;&nbsp;Documentation</th>
						<td valign="top">CPIM is documented through a set of related documents in the IETF Standards Track, specifically <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="https://www.ietf.org/rfc/rfc3862.txt">RFC 3862</a> and <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="https://www.ietf.org/rfc/rfc5438.txt">RFC 5438</a> which extends the header fields. See  <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="#specs">Format Specifications</a> for details.</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">Adoption</th>
						<td valign="top">CPIM is the standard syntax defined by IETF for instant messages transfered through the message transfer protocol.  As such, it is highly adopted and interoperable with many tool sets and applications.</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">&nbsp;&nbsp;&nbsp;&nbsp;Licensing and patents</th>
						<td valign="top">None</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">Transparency</th>
						<td valign="top">
			<p>Apart from when encrypted, CPIM files are usually simple text files and can be opened in Notepad or a web browser.</p>
		</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">Self-documentation</th>
						<td valign="top">Metadata is available through the well-structured header fields.</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">External dependencies</th>
						<td valign="top">None</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">Technical protection considerations</th>
						<td valign="top">
			<a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="https://www.ietf.org/rfc/rfc3862.txt">RFC 3862</a> states that CPIM "is designed with security in mind" in that "it is designed to be used with MIME security multiparts
for signatures and encryption."</td>
					</tr>
				</tbody>
			</table><br><a name="factors"></a><h3>Quality and functionality factors
						<a href="fdd_explanation.shtml#factors">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><br><a name="sign"></a><h3>File type signifiers and format identifiers
						<a href="fdd_explanation.shtml#sign">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><table border="1" cellspacing="0" cellpadding="2" width="90%" summary="The File Type Signifiers table documents some of the indicators that may be used by automated systems to identify or characterize a file or the data encodings contained within a file.">
				<tbody>
					<tr>
						<th scope="col">Tag</th>
						<th scope="col">Value</th>
						<th scope="col">Note</th>
					</tr>
			<tr>
						<th scope="row" width="15%" valign="top">Internet Media Type</th>
						<td width="15%" valign="top">message/CPIM<br></td>
						<td valign="top">Defined in <a xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" href="https://www.ietf.org/rfc/rfc3862.txt">RFC 3862</a>. Other MIME headers may be used as appropriate for the message transfer environment.</td>
					</tr>
		</tbody>
			</table><br><a name="notes"></a><h3>Notes
						<a href="fdd_explanation.shtml#notes">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><table border="1" cellspacing="0" cellpadding="2" width="90%" summary="The Notes table includes informative notes about the format that do not fit elsewhere in the Format Description Document.">
				<tbody>
					<tr>
						<th scope="row" width="30%" valign="top">General</th>
						<td valign="top">
			<p>The MIME headers for the overall message identifies the message as a CPIM-formatted message. This includes the required Message/CPIM header but also may include other MIME headers as appropriate for the message. The MIME header is followed by a blank separator line.</p>
			<p>The separator line is followed by message headers. Message headers carry information relevant to the end-to-end transfer of the message from sender to receiver.  Other header syntax is similar to <a href="fdd000393.shtml">IMF</a> including "From," "To," "cc," "DateTime," and "Subject." Header names and other text must be used as given, using exactly the indicated upper- and lower-case letters. One interesting difference is that IMF requires 7-bit ASCII which is problematic for encoding international character sets while CPIM requires UTF-8 character encoding though except for header names which require US-ASCII. Message headers must not be modified, reformatted or reordered in transit, but in some circumstances they may be examined by a CPIM message transfer protocol. Headers use UTF-8 character encoding throughout. CPIM is extended through RFC 5438 with new header fields that enable endpoints to request Instant Message Disposition Notifications.</p>
			<p>After the message header is the encapsulated MIME object containing the message content. MIME content headers MUST include at least a Content-Type header. Message content may be any MIME type. A message header may indicate a language for its value by including ";lang=tag" after the header name and colon, where "tag" is a language identifying token per RFC 3066. </p>
			<p>Finally, the message may close with MIME security multiparts for signatures as detailed in RFC 1847, appropriate security protocols (e.g., S/MIME or openPGP ), and encryption cryptographic schemes.</p>
			<p>Instant messaging, defined in RFC 2778, follows the Instant Message Protocol in which a sender provides instant messages to the instant message service which attempts delivery to a specific instant inbox address. The instant inbox address must have an <i xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Open </i>status, indicating that the inbox is "available" or "open for business" for the instant message to be accepted. A <i xmlns:fdd=".\fdd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Closed</i> status means "unavailable" or "closed to business" and the instant message will not be delivered.</p>
		</td>
					</tr>
					<tr>
						<th scope="row" width="30%" valign="top">History</th>
						<td valign="top">&nbsp;</td>
					</tr>
				</tbody>
			</table><br><a name="specs"></a><h3>Format specifications 
						<a href="fdd_explanation.shtml#specs">
					<img alt="Explanation of format description terms" title="Explanation of format description terms" src="info.gif" border="0" vspace="0">
				</a></h3><ul>
				<li>RFCs for CPIM<ul>
						<li>
							<a href="https://www.ietf.org/rfc/rfc3862.txt">RFC 3862: Common Presence and Instant Messaging (CPIM): Message Format</a> (https://www.ietf.org/rfc/rfc3862.txt).</li>
						<li>
							<a href="https://www.ietf.org/rfc/rfc3860.txt">RFC 3860: Common Profile for Instant Messaging (CPIM)</a> (https://www.ietf.org/rfc/rfc3860.txt).</li>
						<li>
							<a href="https://www.ietf.org/rfc/rfc3861.txt">RFC 3861: Address Resolution for Instant Messaging and Presence</a> (https://www.ietf.org/rfc/rfc3861.txt).</li>
					</ul></li>
				<li>Related RFCs<ul>
						<li>
							<a href="https://www.ietf.org/rfc/rfc2778.txt">RFC 2778: A Model for Presence and Instant Messaging</a> (https://www.ietf.org/rfc/rfc2778.txt).</li>
						<li>
							<a href="https://www.ietf.org/rfc/rfc2779.txt">RFC 2779: Instant Messaging / Presence Protocol Requirements</a> (https://www.ietf.org/rfc/rfc2779.txt).</li>
						<li>
							<a href="https://www.ietf.org/rfc/rfc5438.txt">RFC 5438: Instant Message Disposition Notification (IMDN)</a> (https://www.ietf.org/rfc/rfc5438.txt).</li>
						<li>
							<a href="https://www.ietf.org/rfc/rfc3261.txt">RFC 3261:  SIP: Session Initiation Protocol</a> (https://www.ietf.org/rfc/rfc3261.txt).&nbsp;Protocol for creating, modifying, and terminating sessions with one or more participants including Internet telephone calls, multimedia distribution, and multimedia conferences.</li>
					</ul></li>
			</ul><br><a name="useful"></a><h3>Useful references</h3><b>URLs</b><br><ul>
				<li>
					<a href="https://en.wikipedia.org/wiki/Instant_messaging">Wikipedia entry for Instant messaging</a> (https://en.wikipedia.org/wiki/Instant_messaging).&nbsp;Includes discussion of many email formats including EML</li>
				<li>
					<a href="https://en.wikipedia.org/wiki/Instant_Messaging_and_Presence_Protocol">Wikipedia entry for Instant Messaging and Presence Protocol</a> (https://en.wikipedia.org/wiki/Instant_Messaging_and_Presence_Protocol).</li>
				<li>
					<a href="http://fileformats.archiveteam.org/wiki/E-Mail,_newsgroups,_and_forums">Archive Team E-Mail, newsgroups, and forums</a> (http://fileformats.archiveteam.org/wiki/E-Mail,_newsgroups,_and_forums).&nbsp;Useful list of IM clients</li>
			</ul><br><!-- stopprint --><br><div align="right" class="update">Last Updated: 02/27/2017</div><br></div><!-- end body area --><!-- begin footer table -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td class="footer-bg"> 
	<table cellpadding="3" cellspacing="0" border="0" width="100%" class="header-bg">
        <tr valign="top">
          <td class="header">&nbsp;</td>
          <td align="right"> 
            <div align="right" class="header"><a href="/preservation/digital/index.html  ">Digital Preservation Home</a> | <a href="/preservation/digital/formats/index.html">Digital Formats Home</a> &nbsp;&nbsp;&nbsp;</div>
          </td>
        </tr>
     </table>
	</td>
  </tr>
</table>
<!-- end footer table -->
<script>if(window['_satellite']){_satellite.pageBottom();}</script>
</body></html>